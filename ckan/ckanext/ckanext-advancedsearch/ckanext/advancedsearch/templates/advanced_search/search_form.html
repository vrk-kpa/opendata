
{% asset 'advancedsearch/avoindata_utils_js' %}
{%- set prev_query = c.advanced_search.last_query -%}
{%- set field_options = c.advanced_search.field_options -%}

<aside id="advanced-search-options" class="secondary sidebar-offcanvas col-sm-4">
  <div id="search-options-header" class="d-flex flex-wrap justify-content-between align-items-center mt-3 search-form__result-summary">
    <h3 class="advanced-search__title">{{_("Filter search")}}</h3>
  </div>
  <div id="search-options-content">
    <div>
      {% snippet 'advanced_search/display_field.html', field=input_fields.dataset_type, prev_query=prev_query, options=field_options['dataset_type'] %}
    </div>
    <div>
      {% snippet 'advanced_search/display_field.html', field=input_fields.publisher, prev_query=prev_query, options=field_options['publisher'] %}
    </div>
    <div>
      {% snippet 'advanced_search/display_field.html', field=input_fields.category, prev_query=prev_query, options=field_options['category'] %}
    </div>

    <div>
      <div class="md-12">
        <label class="ytp-input-label" id="release-interval-label">{{_("Release interval")|capitalize}}</label>
      </div>
      <div class="clearfix mb-3 released-picker-div">
        {% snippet 'advanced_search/display_field.html', field=input_fields.released, prev_query=prev_query, options=field_options['released'] %}
      </div>
    </div>

    <div>
      <div class="md-12">
        <label class="ytp-input-label" id="update-interval-label">{{_("Update interval")|capitalize}}</label>
      </div>
      <div class="clearfix mb-3 updated-picker-div">
        {% snippet 'advanced_search/display_field.html', field=input_fields.updated, prev_query=prev_query, options=field_options['updated'] %}
      </div>
    </div>
    
    <hr class="avoindata-divider">
    <a class="more-options-link" data-expanded="true" data-target="#search-options-extras" data-module="avoindata-utils"><span id="more-options-link-text">{{_("Show less options")}}</span>
    &nbsp;&nbsp;
    <i class="fas fa-angle-up"></i></a>
    <div id="search-options-extras" class="collapse in">
      <div>
        {% snippet 'advanced_search/display_field.html', field=input_fields.license, prev_query=prev_query, options=field_options['license'] %}
      </div>
      <div>
        {% snippet 'advanced_search/display_field.html', field=input_fields.format, prev_query=prev_query, options=field_options['format'] %}
      </div>
    </div>

    <hr class="avoindata-divider">

    <div>
      <div class="md-12 mb-3 mt-3 d-flex justify-content-start">
        <button type="submit" class="btn suomifi-button-primary" name="do-advancedsearch">{{_("Do search")}}</button>
    </div>

  </div>
</aside>
