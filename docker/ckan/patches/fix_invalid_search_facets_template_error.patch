diff --git a/ckan/lib/helpers.py b/ckan/lib/helpers.py
index 8e16f9d7d..d81de46c3 100644
--- a/ckan/lib/helpers.py
+++ b/ckan/lib/helpers.py
@@ -1000,8 +1000,9 @@ def get_facet_items_dict(facet, limit=None, exclude_active=False):
     exclude_active -- only return unselected facets.
 
     '''
-    if not hasattr(c, u'search_facets') or not c.search_facets.get(
-                                               facet, {}).get(u'items'):
+    if not c.search_facets \
+       or not isinstance(c.search_facets, dict) \
+       or not c.search_facets.get(facet, {}).get('items'):
         return []
     facets = []
     for facet_item in c.search_facets.get(facet)['items']:
diff --git a/ckan/templates/snippets/search_form.html b/ckan/templates/snippets/search_form.html
index fed9bd48d..290092f3c 100644
--- a/ckan/templates/snippets/search_form.html
+++ b/ckan/templates/snippets/search_form.html
@@ -57,7 +57,7 @@
     {% if facets %}
       <p class="filter-list">
         {% for field in facets.fields %}
-          {% set search_facets_items = facets.search.get(field)['items'] %}
+          {% set search_facets_items = facets.search.get(field)['items'] if facets.search and field in facets.search else [] %}
           <span class="facet">{{ facets.titles.get(field) }}:</span>
           {% for value in facets.fields[field] %}
             <span class="filtered pill">
