!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.CKEditor5=n():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.avoindataExternalLink=n())}(self,(()=>(()=>{var __webpack_modules__={"./src/avoindataExternalLink/avoindataExternalLink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AvoindataExternalLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var _css_styles_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../css/styles.css */ \"./css/styles.css\");\n\n\n\nclass AvoindataExternalLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  init() {\n    const { conversion } = this.editor;\n\n    // Upcast Converter for the old ckeditor4 plugin format\n    conversion.for('upcast').elementToAttribute({\n      model: 'linkIsExternal',\n      view: {\n        name: 'a',\n        classes: ['external'],\n        attributes: ['aria-label', 'target'],\n      },\n    });\n\n    // Extra consumption for the leftover svg icon\n    conversion.for('upcast').add(dispatcher => {\n      // Look for every view svg element.\n      dispatcher.on('element:svg', (evt, data, conversionApi) => {\n        // Get all the necessary items from the conversion API object.\n        const {\n          consumable\n        } = conversionApi;\n\n        // Get view item from data object.\n        const { viewItem } = data;\n\n        // Define elements consumables.\n        const svg = { name: 'svg', attributes: ['viewBox'] };\n        const use = { name: 'use', attributes: ['href'] };\n\n        // Tests if the view element can be consumed.\n        if (!consumable.test(viewItem, svg)) {\n          return;\n        }\n\n        // Check if there is only one child.\n        if (viewItem.childCount !== 1) {\n          return;\n        }\n\n        // Get the first child element.\n        const firstChildItem = viewItem.getChild(0);\n\n        // Check if the first element is a div.\n        if (!firstChildItem.is('element', 'use')) {\n          return;\n        }\n\n        // Tests if the first child element can be consumed.\n        if (!consumable.test(firstChildItem, use)) {\n          return;\n        }\n\n        // If a use tag inside a svg has the string 'avoindata_external-link' within the href\n        // we can assume it's the old ckeditor4 plugin format and simply get rid of them\n        if (firstChildItem?.getAttribute('href')?.includes('avoindata_external-link')) {\n          // Consume the main outer wrapper element.\n          consumable.consume(viewItem, svg);\n          // Consume the inner wrapper element.\n          consumable.consume(firstChildItem, use);\n        }\n      });\n    });\n  }\n\n  static get pluginName() {\n    return 'AvoindataExternalLink';\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.avoindataExternalLink/./src/avoindataExternalLink/avoindataExternalLink.js?")},"./src/avoindataExternalLink/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _avoindataExternalLink__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./avoindataExternalLink */ "./src/avoindataExternalLink/avoindataExternalLink.js");\n/**\n * @file The build process always expects an index.js file. Anything exported\n * here will be recognized by CKEditor 5 as an available plugin. Multiple\n * plugins can be exported in this one file.\n *\n * I.e. this file\'s purpose is to make plugin(s) discoverable.\n */\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  AvoindataExternalLink: _avoindataExternalLink__WEBPACK_IMPORTED_MODULE_0__["default"],\n});\n\n\n//# sourceURL=webpack://CKEditor5.avoindataExternalLink/./src/avoindataExternalLink/index.js?')},"./css/styles.css":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('module.exports = __webpack_require__.p + "../css/styles.css";\n\n//# sourceURL=webpack://CKEditor5.avoindataExternalLink/./css/styles.css?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.avoindataExternalLink/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,n)=>{for(var r in n)__webpack_require__.o(n,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var n=__webpack_require__.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var t=r.length-1;t>-1&&!e;)e=r[t--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})();var __webpack_exports__=__webpack_require__("./src/avoindataExternalLink/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));